---
title: 在微信小程序中使用可缩放矢量图形SVG
date: 2018-12-14 14:35:59
categories:
- 技术
tags:
- SVG
- 小程序
- 2018
---

**为什么要使用SVG资源？**

SVG的优势很多，但从实际使用中，个人觉得优点如下：
1. SVG比图片尺寸更小，可压缩性更强；
2. 在任何分辨率下，不会失真；
3. SVG图像中的文本是可选的；
4. 可以使用很多工具打开；

**如何使用SVG?**

使用SVG资源，总共分三步：
* 下载SVG资源
* 获取SVG代码
* 转换至64

**从哪里下载SVG资源**

SVG资源的下载来源很多，我个人常用的下载路径如下：

<!-- more -->

* 阿里巴巴矢量图标库，请 [戳这里](https://www.iconfont.cn/?spm=a313x.7781069.1998910419.d4d0a486a)
* 老外的矢量图标库，请 [戳这里](https://material.io/tools/)

**如何获取SVG资源代码**

SVG代码获取，有两种方式：

* 使用文本编辑工具打开SVG资源文件，代码如下：
```
<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1544701384266" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4405" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M620.8 486.4c54.4-38.4 92.8-102.4 92.8-172.8 0-118.4-96-211.2-211.2-211.2-115.2 0-211.2 96-211.2 211.2 0 73.6 38.4 140.8 96 176-204.8 48-355.2 214.4-339.2 406.4 0 0 0-3.2 0 0l0 0c0 0 0 9.6 3.2 12.8 3.2 6.4 12.8 12.8 19.2 12.8l880 0c9.6 0 19.2-9.6 22.4-22.4l0 0 0 0c0-6.4 0 0 0 0C992 697.6 832 528 620.8 486.4zM336 310.4c0-89.6 73.6-163.2 163.2-163.2 89.6 0 163.2 73.6 163.2 163.2s-73.6 163.2-163.2 163.2C409.6 473.6 336 400 336 310.4zM96 870.4c-9.6-192 179.2-348.8 412.8-348.8l3.2 0c233.6 0 422.4 153.6 416 348.8L96 870.4z" p-id="4406" fill="#8992c8"></path></svg>
```
上面的代码中，fill属性是设置图形的颜色。

2. 通过老外的网站获取SVG代码，链接[戳这里](https://jakearchibald.github.io/svgomg/)。代码如下:
```
<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><defs><style/></defs><path d="M620.8 486.4c54.4-38.4 92.8-102.4 92.8-172.8 0-118.4-96-211.2-211.2-211.2-115.2 0-211.2 96-211.2 211.2 0 73.6 38.4 140.8 96 176C182.4 537.6 32 704 48 896c0 0 0-3.2 0 0 0 0 0 9.6 3.2 12.8 3.2 6.4 12.8 12.8 19.2 12.8h880c9.6 0 19.2-9.6 22.4-22.4 0-6.4 0 0 0 0C992 697.6 832 528 620.8 486.4zM336 310.4c0-89.6 73.6-163.2 163.2-163.2s163.2 73.6 163.2 163.2-73.6 163.2-163.2 163.2S336 400 336 310.4zm-240 560c-9.6-192 179.2-348.8 412.8-348.8h3.2c233.6 0 422.4 153.6 416 348.8H96z" fill="#8992c8"/></svg>
```

**如何将SVG资源代码转换成Base64编码格式**

在小程序中使用svg，必须要以css设置背景图的方式去呈现，因此要进行base64编码；不支持像在web一样的去使用。

将svg代码转换成base64编码的渠道，可以老外的网站进行转码，具体 [戳这里](https://codepen.io/jakob-e/pen/doMoML)。截图如下：

<center>![SVG代码转成Base64编码](https://file.baozhou.wang/2018/svg_encode.png "SVG代码转成Base64编码")</center>

转码后的代码如下：
```
background-image: url("data:image/svg+xml, 540 bytes → 365 bytes 67.59%25 %3Csvg class='icon' viewBox='0 0 1024 1024' xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cdefs%3E%3Cstyle/%3E%3C/defs%3E%3Cpath d='M620.8 486.4c54.4-38.4 92.8-102.4 92.8-172.8 0-118.4-96-211.2-211.2-211.2-115.2 0-211.2 96-211.2 211.2 0 73.6 38.4 140.8 96 176C182.4 537.6 32 704 48 896c0 0 0-3.2 0 0 0 0 0 9.6 3.2 12.8 3.2 6.4 12.8 12.8 19.2 12.8h880c9.6 0 19.2-9.6 22.4-22.4 0-6.4 0 0 0 0C992 697.6 832 528 620.8 486.4zM336 310.4c0-89.6 73.6-163.2 163.2-163.2s163.2 73.6 163.2 163.2-73.6 163.2-163.2 163.2S336 400 336 310.4zm-240 560c-9.6-192 179.2-348.8 412.8-348.8h3.2c233.6 0 422.4 153.6 416 348.8H96z' fill='%238992c8'/%3E%3C/svg%3E");
```

上述代码中，这部分代码（`540 bytes → 365 bytes 67.59%25`）要删除，否则背景图可能不会生效。